# Postman 使用指南

## 概述

本文档介绍如何使用Postman测试One-API的接口。

## 文件说明

- `One-API_Collection.json` - API测试集合
- `One-API_Environment.json` - 环境配置文件

## 导入步骤

### 1. 导入集合

1. 打开Postman
2. 点击"Import"按钮
3. 选择`One-API_Collection.json`文件
4. 点击"Import"完成导入

### 2. 导入环境

1. 在Postman中点击"Import"
2. 选择`One-API_Environment.json`文件
3. 点击"Import"完成导入
4. 在右上角选择"One-API Environment"环境

## 使用流程

### 1. 用户认证

1. 运行"用户登录"接口
2. 登录成功后，token会自动保存到环境变量中
3. 后续所有需要认证的接口都会自动使用这个token

### 2. 用户信息管理

1. **获取用户信息** - 查看当前用户信息
2. **更新用户信息** - 修改用户名、显示名称、学校、学院、手机号等信息
3. **用户注册** - 创建新用户账户

### 3. 测试话题功能

1. **创建话题** - 运行"创建话题"接口
2. **获取话题列表** - 查看所有话题
3. **发送消息** - 在指定话题中发送消息
4. **获取消息** - 查看话题的聊天记录
5. **删除话题** - 删除不需要的话题

### 4. 测试订阅功能

1. **创建订阅** - 运行"创建订阅"接口
2. **获取订阅列表** - 查看所有订阅
3. **获取订阅文章** - 查看订阅的文章内容
4. **取消订阅** - 暂停订阅
5. **重新激活订阅** - 恢复订阅
6. **删除订阅** - 永久删除订阅

## 环境变量

| 变量名 | 说明 | 示例值 |
|--------|------|--------|
| base_url | 服务器地址 | http://47.88.91.79:9999 |
| token | 认证token | eyJhbGciOiJIUzI1NiIs... |
| user_id | 用户ID | 1 |
| topic_id | 话题ID | 1 |
| subscription_id | 订阅ID | 1 |

## 注意事项

1. **认证流程**：必须先运行"用户登录"接口获取token
2. **环境选择**：确保选择了正确的环境
3. **ID参数**：某些接口需要动态ID，请根据实际情况修改
4. **错误处理**：注意查看响应状态码和错误信息

## 常见问题

### Q: 登录后token没有自动保存？
A: 检查"用户登录"接口的Tests脚本是否正确执行

### Q: 接口返回401错误？
A: 检查token是否有效，可能需要重新登录

### Q: 如何修改服务器地址？
A: 在环境变量中修改`base_url`的值

## 接口测试顺序建议

1. 用户登录
2. 获取用户信息
3. 更新用户信息
4. 创建话题
5. 发送消息
6. 获取话题消息
7. 创建订阅
8. 获取订阅文章
9. 取消订阅
10. 重新激活订阅
11. 删除话题
12. 删除订阅
